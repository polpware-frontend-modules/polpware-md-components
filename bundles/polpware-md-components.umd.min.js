!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/collections"),require("rxjs"),require("showdown"),require("@angular/core"),require("@angular/material"),require("@angular/forms"),require("ngx-chips")):"function"==typeof define&&define.amd?define("@polpware/md-components",["exports","@angular/cdk/collections","rxjs","showdown","@angular/core","@angular/material","@angular/forms","ngx-chips"],t):t((e.polpware=e.polpware||{},e.polpware["md-components"]={}),e.ng.cdk.collections,e.rxjs,e.showdown,e.ng.core,e.ng.material,e.ng.forms,e.ngxChips)}(this,function(e,t,n,o,i,r,a,s){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function u(e,t){function i(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var d=function(i){function e(e){var t=i.call(this)||this;return t._database=e,t._filterChange=new n.BehaviorSubject(""),t}return u(e,i),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filterChange.value},set:function(e){this._filterChange.next(e)},enumerable:!0,configurable:!0}),e.prototype.connect=function(){return this._database.dataChange.asObservable()},e.prototype.disconnect=function(){},e}(t.DataSource),c=function(){function e(e,t){this.dialogRef=e,this.data=t,this.title=t.title||""}return e.prototype.onNoClick=function(){this.dialogRef.close()},e.decorators=[{type:i.Component,args:[{selector:"polp-md-indicator-modal",template:'<div class="full-width flex-box flex-column align-items-center">\r\n  <mat-spinner>\r\n  </mat-spinner>\r\n  <h3>{{title}}</h3>\r\n</div>\r\n\r\n'}]}],e.ctorParameters=function(){return[{type:r.MatDialogRef},{type:undefined,decorators:[{type:i.Inject,args:[r.MAT_DIALOG_DATA]}]}]},e}(),m=function(){function e(e){this._dialog=e,this._showingTimer=null,this._showingDelay=500,this._dismissingTimer=null,this._diaglogRef=null,this._counter=0}return e.prototype.setDelay=function(e){this._showingDelay=1e3*e},e.prototype.show=function(e){var t=this;if(void 0===e&&(e="Loading ..."),this._counter++,!this._diaglogRef)return this._dismissingTimer?(clearTimeout(this._dismissingTimer),void(this._dismissingTimer=0)):void(this._showingTimer||(this._showingTimer=setTimeout(function(){t._showingTimer=null,t._diaglogRef=t._dialog.open(c,{width:"250px",data:{title:e}})},this._showingDelay)));this._dismissingTimer&&(clearTimeout(this._dismissingTimer),this._dismissingTimer=0)},e.prototype.hide=function(){var e=this;if(this._counter--,!(0<this._counter))return this._showingTimer?(clearTimeout(this._showingTimer),void(this._showingTimer=null)):this._dismissingTimer?(clearTimeout(this._dismissingTimer),void(this._dismissingTimer=setTimeout(function(){e._dismissingTimer=null,e._diaglogRef&&(e._diaglogRef.close(),e._diaglogRef=null)},300))):void(this._diaglogRef&&(this._dismissingTimer=setTimeout(function(){e._diaglogRef&&(e._diaglogRef.close(),e._diaglogRef=null)},300)))},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[{type:r.MatDialog}]},e}();function p(e){var t=e.value;return/\S+@\S+\.\S+/.test(t)?null:{isValidEmail:!0}}var g=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*/g;function f(e){for(var t,i=[],n=0;t=g.exec(e);){var o;(o=e.substring(n,t.index).replace(/(^[\s,>]+)|"|([\s,<]+$)/g,""))?i.push('"'+o+'" <'+t[0]+">"):i.push(t[0]),n=t.index+t[0].length}return i}function h(e){for(var t,i=[];t=g.exec(e);)i.push(t[0]);return i}var y=function(){function e(e){this.dialogRef=e,this.validators=[p],this.errorMessages={isValidEmail:"Please input a valid email"},this.title="Send out an email",this.emails=[],this.messageBody="",this.disableFocusEvent=!1}return Object.defineProperty(e.prototype,"isSubmitDisabled",{get:function(){return 0===this.emails.length},enumerable:!0,configurable:!0}),e.prototype.onOutOfTagInput=function(e){var t=this;this.disableFocusEvent||(e.preventDefault(),e.stopPropagation(),f(this.emailInputBox.formValue).forEach(function(e){t.emails.push(e)}),this.emailInputBox.setInputValue(""),this.disableFocusEvent=!0,this.emailBody.nativeElement.focus(),this.disableFocusEvent=!1)},e.propDecorators={emailInputBox:[{type:i.ViewChild,args:["emailInputBox"]}],emailBody:[{type:i.ViewChild,args:["emailBody"]}]},e}(),_=function(n){function e(e,t){var i=n.call(this,e)||this;return i.dialogRef=e,i.data=t,i.messageBody=t.emailBody||"",i}return u(e,n),Object.defineProperty(e.prototype,"isSubmitDisabled",{get:function(){return 0===this.emails.length},enumerable:!0,configurable:!0}),e.prototype.onSubmit=function(){var e=this.messageBody;e=(new o.Converter).makeHtml(e);var t=[];this.emails.forEach(function(e){h(e||e.value).forEach(function(e){t.push(e)})});var i={confirmed:!0,emailReceivers:t,emailBody:e,emailTitle:this.data.emailTitle||""};this.dialogRef.close(i)},e.decorators=[{type:i.Component,args:[{selector:"polp-md-email-form",template:'<h2 mat-dialog-title>\r\n    {{title}}\r\n    <button class="float-right"\r\n            mat-icon-button\r\n            tabIndex="-1"\r\n            [mat-dialog-close]="true">\r\n        <mat-icon>close</mat-icon>\r\n    </button>\r\n</h2>\r\n\r\n<mat-dialog-content>\r\n\r\n    <form name="emailForm" autocomplete="off">\r\n        <div class="flex-box flex-column margin-bottom-15">\r\n            <tag-input [(ngModel)]="emails" #emailInputBox\r\n                       name="emailInputs"\r\n                       [addOnPaste]="true"\r\n                       [modelAsStrings]="true"\r\n                       [trimTags]="true"\r\n                       [editable]="true"\r\n                       (focusout)="onOutOfTagInput($event)"\r\n                       [errorMessages]="errorMessages"\r\n                       [validators]="validators"\r\n                       [secondaryPlaceholder]="\'Emails\'"\r\n                       [separatorKeyCodes]="[32,44,58,59]"\r\n                       [placeholder]="\'More Emails\'">\r\n            </tag-input>\r\n\r\n            <div class="full-width">\r\n                <textarea name="messageBody"\r\n                          matInput\r\n                          #emailBody\r\n                          cdkTextareaAutosize\r\n                          cdkAutosizeMinRows="2"\r\n                          cdkAutosizeMaxRows="5"                      \r\n                          placeholder="Type your personal message here"\r\n                          [(ngModel)]="messageBody">\r\n                </textarea>\r\n            </div>\r\n\r\n        </div>\r\n    </form>\r\n\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions>\r\n    <button mat-flat-button\r\n            color="primary"\r\n            [disabled]="isSubmitDisabled"\r\n            (click)="onSubmit()">\r\n        Send\r\n    </button>\r\n</mat-dialog-actions>\r\n'}]}],e.ctorParameters=function(){return[{type:r.MatDialogRef},{type:undefined,decorators:[{type:i.Inject,args:[r.MAT_DIALOG_DATA]}]}]},e}(y),v=function(){function e(e){if(e)throw new Error("PolpMdComponentsModule is already loaded. Import it in the AppModule only")}return e.forRoot=function(){return{ngModule:e}},e.decorators=[{type:i.NgModule,args:[{declarations:[c,_],imports:[a.FormsModule,a.ReactiveFormsModule,r.MatProgressSpinnerModule,r.MatDialogModule,r.MatButtonModule,r.MatIconModule,s.TagInputModule],exports:[c,_],entryComponents:[c,_],providers:[m]}]}],e.ctorParameters=function(){return[{type:e,decorators:[{type:i.Optional},{type:i.SkipSelf}]}]},e}();e.TableDataSourceAdaptor=d,e.PolpMdIndicatorModal=c,e.PolpMdSpinnerServiceImpl=m,e.parseEmails=f,e.parseOnlyEmails=h,e.EmailFormAbstractComponent=y,e.EmailFormComponent=_,e.PolpMdComponentsModule=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polpware-md-components.umd.min.js.map