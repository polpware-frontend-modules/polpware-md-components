!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/collections"),require("showdown"),require("rxjs"),require("@angular/cdk/coercion"),require("@angular/common/http"),require("@polpware/fe-utilities"),require("@angular/core"),require("@angular/common"),require("@angular/material"),require("@angular/forms"),require("ngx-chips"),require("ngx-autosize")):"function"==typeof define&&define.amd?define("@polpware/md-components",["exports","@angular/cdk/collections","showdown","rxjs","@angular/cdk/coercion","@angular/common/http","@polpware/fe-utilities","@angular/core","@angular/common","@angular/material","@angular/forms","ngx-chips","ngx-autosize"],e):e((t.polpware=t.polpware||{},t.polpware["md-components"]={}),t.ng.cdk.collections,t.showdown,t.rxjs,t.ng.cdk.coercion,t.ng.common.http,t.feUtilities,t.ng.core,t.ng.common,t.ng.material,t.ng.forms,t.ngxChips,t.ngxAutosize)}(this,function(t,e,i,o,n,r,a,s,l,c,u,d,p){"use strict";var m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function f(t,e){function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var g=function(n){function t(t){var e=n.call(this)||this;return e._database=t,e._filterChange=new o.BehaviorSubject(""),e}return f(t,n),Object.defineProperty(t.prototype,"filter",{get:function(){return this._filterChange.value},set:function(t){this._filterChange.next(t)},enumerable:!0,configurable:!0}),t.prototype.connect=function(){return this._database.dataChange.asObservable()},t.prototype.disconnect=function(){},t}(e.DataSource),h=function(){function t(t,e){this.dialogRef=t,this.data=e,this.title=e.title||""}return t.prototype.onNoClick=function(){this.dialogRef.close()},t.decorators=[{type:s.Component,args:[{selector:"polp-md-indicator-modal",template:'<div class="full-width flex-box flex-column align-items-center">\r\n  <mat-spinner>\r\n  </mat-spinner>\r\n  <h3>{{title}}</h3>\r\n</div>\r\n\r\n'}]}],t.ctorParameters=function(){return[{type:c.MatDialogRef},{type:undefined,decorators:[{type:s.Inject,args:[c.MAT_DIALOG_DATA]}]}]},t}(),y=function(){function t(t){this._dialog=t,this._showingTimer=null,this._showingDelay=500,this._dismissingTimer=null,this._diaglogRef=null,this._counter=0}return t.prototype.setDelay=function(t){this._showingDelay=1e3*t},t.prototype.show=function(t){var e=this;if(void 0===t&&(t="Loading ..."),this._counter++,!this._diaglogRef)return this._dismissingTimer?(clearTimeout(this._dismissingTimer),void(this._dismissingTimer=0)):void(this._showingTimer||(this._showingTimer=setTimeout(function(){e._showingTimer=null,e._diaglogRef=e._dialog.open(h,{width:"250px",data:{title:t}})},this._showingDelay)));this._dismissingTimer&&(clearTimeout(this._dismissingTimer),this._dismissingTimer=0)},t.prototype.hide=function(){var t=this;if(this._counter--,!(0<this._counter))return this._showingTimer?(clearTimeout(this._showingTimer),void(this._showingTimer=null)):this._dismissingTimer?(clearTimeout(this._dismissingTimer),void(this._dismissingTimer=setTimeout(function(){t._dismissingTimer=null,t._diaglogRef&&(t._diaglogRef.close(),t._diaglogRef=null)},300))):void(this._diaglogRef&&(this._dismissingTimer=setTimeout(function(){t._diaglogRef&&(t._diaglogRef.close(),t._diaglogRef=null)},300)))},t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:c.MatDialog}]},t}();function b(t){var e=t.value;return/\S+@\S+\.\S+/.test(e)?null:{isValidEmail:!0}}var v=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*/g;function _(t){for(var e,n=[],o=0;e=v.exec(t);){var i;(i=t.substring(o,e.index).replace(/(^[\s,>]+)|"|([\s,<]+$)/g,""))?n.push('"'+i+'" <'+e[0]+">"):n.push(e[0]),o=e.index+e[0].length}return n}function x(t){for(var e,n=[];e=v.exec(t);)n.push(e[0]);return n}var C=function(){function t(t){this.dialogRef=t,this.validators=[b],this.errorMessages={isValidEmail:"Please input a valid email"},this.title="Send out an email",this.emails=[],this.messageBody="",this.disableFocusEvent=!1}return Object.defineProperty(t.prototype,"isSubmitDisabled",{get:function(){return 0===this.emails.length},enumerable:!0,configurable:!0}),t.prototype.onOutOfTagInput=function(t){var e=this;this.disableFocusEvent||(t.preventDefault(),t.stopPropagation(),_(this.emailInputBox.formValue).forEach(function(t){e.emails.push(t)}),this.emailInputBox.setInputValue(""),this.disableFocusEvent=!0,this.emailBody.nativeElement.focus(),this.disableFocusEvent=!1)},t.propDecorators={emailInputBox:[{type:s.ViewChild,args:["emailInputBox"]}],emailBody:[{type:s.ViewChild,args:["emailBody"]}]},t}(),T=function(o){function t(t,e){var n=o.call(this,t)||this;return n.dialogRef=t,(n.data=e).title&&(n.title=e.title),n.messageBody=e.emailBody||"",n}return f(t,o),Object.defineProperty(t.prototype,"isSubmitDisabled",{get:function(){return 0===this.emails.length},enumerable:!0,configurable:!0}),t.prototype.onSubmit=function(){var t=this.messageBody;t=(new i.Converter).makeHtml(t);var e=[];this.emails.forEach(function(t){x(t||t.value).forEach(function(t){e.push(t)})});var n={confirmed:!0,emailReceivers:e,emailBody:t,emailTitle:this.data.emailTitle||""};this.dialogRef.close(n)},t.decorators=[{type:s.Component,args:[{selector:"polp-md-email-form",template:'<h2 mat-dialog-title>\r\n    {{title}}\r\n    <button class="float-right"\r\n            mat-icon-button\r\n            tabIndex="-1"\r\n            [mat-dialog-close]="true">\r\n        <mat-icon>close</mat-icon>\r\n    </button>\r\n</h2>\r\n\r\n<mat-dialog-content>\r\n\r\n    <form name="emailForm" autocomplete="off">\r\n        <div class="flex-box flex-column margin-bottom-15">\r\n            <tag-input [(ngModel)]="emails" #emailInputBox\r\n                       name="emailInputs"\r\n                       [addOnPaste]="true"\r\n                       [modelAsStrings]="true"\r\n                       [trimTags]="true"\r\n                       [editable]="true"\r\n                       (focusout)="onOutOfTagInput($event)"\r\n                       [errorMessages]="errorMessages"\r\n                       [validators]="validators"\r\n                       [secondaryPlaceholder]="\'Emails\'"\r\n                       [separatorKeyCodes]="[32,44,58,59]"\r\n                       [placeholder]="\'More Emails\'">\r\n            </tag-input>\r\n\r\n            <div class="full-width margin-top-10">\r\n                <textarea name="messageBody"\r\n                          class="full-width"\r\n                          #emailBody\r\n                          autosize [minRows]="5" [maxRows]="10"\r\n                          placeholder="Type your personal message here"\r\n                          [(ngModel)]="messageBody">\r\n                </textarea>\r\n            </div>\r\n\r\n        </div>\r\n    </form>\r\n\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions>\r\n    <button mat-flat-button\r\n            color="primary"\r\n            [disabled]="isSubmitDisabled"\r\n            (click)="onSubmit()">\r\n        Send\r\n    </button>\r\n</mat-dialog-actions>\r\n'}]}],t.ctorParameters=function(){return[{type:c.MatDialogRef},{type:undefined,decorators:[{type:s.Inject,args:[c.MAT_DIALOG_DATA]}]}]},t}(C),A=function(){function t(){this.stateChanges=new o.Subject,this.id="radio-group-field-control-"+t.nextId++,this.focused=!1,this.errorState=!1,this.controlType="radio-group-field",this.describedBy="",this.ngControl=null}return Object.defineProperty(t.prototype,"value",{get:function(){return this.radioGroup.value},set:function(t){this.radioGroup.value=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldLabelFloat",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.radioGroup.required},set:function(t){this.radioGroup.required=n.coerceBooleanProperty(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.radioGroup.disabled},set:function(t){this.radioGroup.disabled=n.coerceBooleanProperty(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.stateChanges.complete()},t.prototype.setDescribedByIds=function(t){this.describedBy=t.join(" ")},t.prototype.onContainerClick=function(t){},t.prototype.writeValue=function(t){t!==undefined&&this.radioGroup.writeValue(t)},t.prototype.registerOnChange=function(t){this.radioGroup.registerOnChange(t)},t.prototype.registerOnTouched=function(t){this.radioGroup.registerOnTouched(t)},t.nextId=0,t.decorators=[{type:s.Component,args:[{selector:"polp-radio-group-field",template:'<mat-radio-group>\n    <mat-radio-button *ngFor="let item of radioOptions" value="{{item.value}}">{{item.text}}</mat-radio-button>\n</mat-radio-group>\n',providers:[{provide:c.MatFormFieldControl,useExisting:t},{provide:u.NG_VALUE_ACCESSOR,multi:!0,useExisting:s.forwardRef(function(){return t})}],styles:[".mat-radio-group .mat-radio-button{margin:0 5px}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={radioGroup:[{type:s.ViewChild,args:[c.MatRadioGroup]}],id:[{type:s.HostBinding}],describedBy:[{type:s.HostBinding,args:["attr.aria-describedby"]}],radioOptions:[{type:s.Input}],value:[{type:s.Input}],placeholder:[{type:s.Input}],shouldLabelFloat:[{type:s.HostBinding,args:["class.floating"]}],required:[{type:s.Input}],disabled:[{type:s.Input}]},t}(),M=function(){function t(t,e){this.dialogRef=t,this.data=e,this.files=[],this.responses=[],this.title=this.data.title||"",this.accept=this.data.accept||"*/",this.text=this.data.prelude||"",this.mode=this.data.progressMode||"indeterminate"}return Object.defineProperty(t.prototype,"isCloseDisabled",{get:function(){return this.files.some(function(t){return t.inProgress})},enumerable:!0,configurable:!0}),t.prototype.close=function(){this.dialogRef.close(this.responses)},t.prototype.ngOnInit=function(){},t.prototype.startUpload=function(){var o=this,i=document.getElementById("polpFileUpload");i.onchange=function(){var t=o.data.validateInput(i.files);if(t)o.error=t;else{for(var e=0;e<i.files.length;e++){var n=i.files[e];o.files.push({uuid:a.guid(),data:n,state:"in",inProgress:!1,progress:0,canRetry:!1,canCancel:!0,message:""})}o.uploadFiles()}},i.click()},t.prototype.cancelFile=function(t){t.sub.unsubscribe(),this.removeFileFromArray(t)},t.prototype.retryFile=function(t){this.uploadFile(t),t.canRetry=!1},t.prototype.postUploadFile=function(t,e){var n=this;this.responses.push({uuid:t.uuid,body:e}),this.data.closeOnSunccess&&this.files.length===this.responses.length&&setTimeout(function(){n.close()})},t.prototype.uploadFile=function(e){var n=this;e.inProgress=!0,e.sub=this.data.uploadService.upload(e.data,this.data.uploadUrl,this.data.makeFormData).subscribe(function(t){switch(t.eventType){case r.HttpEventType.UploadProgress:e.progress=t.percent;break;case r.HttpEventType.Response:e.message="Upload Ok.",e.inProgress=!1,e.canCancel=!1,e.canRetry=!1,n.postUploadFile(e,t.body)}},function(t){e.inProgress=!1,e.canRetry=!0,e.message="upload failure."})},t.prototype.uploadFiles=function(){var e=this;document.getElementById("polpFileUpload").value="",this.files.forEach(function(t){e.uploadFile(t)})},t.prototype.removeFileFromArray=function(t){var e=this.files.indexOf(t);-1<e&&this.files.splice(e,1)},t.decorators=[{type:s.Component,args:[{selector:"plop-upload-file",template:'<h2 mat-dialog-title>\n    {{title}}\n    <button class="float-right"\n            mat-icon-button\n            tabIndex="-1"\n            [disabled]="isCloseDisabled"            \n            [mat-dialog-close]="true">\n        <mat-icon>close</mat-icon>\n    </button>\n</h2>\n\n<mat-dialog-content>\n\n    <div class="flex-box flex-column">\n\n        <button mat-flat-button color="accent" (click)="startUpload()">\n            <mat-icon>file_upload</mat-icon>\n            {{text}}\n        </button>\n\n        <p *ngIf="error" color="warn">{{error}}</p>\n        \n        <mat-list>\n            <mat-list-item *ngFor="let file of files">\n                <mat-progress-bar matLine *ngIf="file.inProgress"\n                                  [value]="file.progress" mode="{{mode}}">\n                </mat-progress-bar>\n                <div matLine>\n                    <span>\n                        {{file.data.name}}\n                    </span>\n                    \n                    <span>\n                        {{file.data.message}}\n                    </span>\n                    \n                    <button mat-icon-button title="Retry" (click)="retryFile(file)" *ngIf="file.canRetry">\n                        <mat-icon>refresh</mat-icon>\n                    </button>\n                    <button mat-icon-button title="Cancel" (click)="cancelFile(file)" *ngIf="file.canCancel">\n                        <mat-icon>cancel</mat-icon>\n                    </button>\n                </div>\n            </mat-list-item>\n        </mat-list>\n\n    </div>    \n    \n    <input type="file" id="polpFileUpload" name="fileUpload" multiple="multiple" accept="{{accept}}" style="display:none;"/>\n    \n</mat-dialog-content>\n\n<mat-dialog-actions>\n    <button mat-flat-button\n            [disabled]="isCloseDisabled"\n            (click)="close()">\n        Close\n    </button>\n</mat-dialog-actions>\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:c.MatDialogRef},{type:undefined,decorators:[{type:s.Inject,args:[c.MAT_DIALOG_DATA]}]}]},t}(),I=function(){function t(t){this.data=t}return t.prototype.ngOnInit=function(){},t.decorators=[{type:s.Component,args:[{selector:"polp-confirm-dialog",template:'<h1 mat-dialog-title>{{data.title}}</h1>\n<div mat-dialog-content>\n    {{data.message}}\n</div>\n<mat-dialog-actions>\n    <button mat-button [mat-dialog-close]="false" color="primary">No</button>\n    <button mat-button [mat-dialog-close]="true" color="warn">Yes</button>\n</mat-dialog-actions>\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:s.Inject,args:[c.MAT_DIALOG_DATA]}]}]},t}(),w=function(){function t(t,e){this.dialogRef=t,(this.data=e).title&&(this.title=e.title),this.messageBody=e.message||""}return Object.defineProperty(t.prototype,"isSubmitDisabled",{get:function(){return!this.messageBody},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.close=function(){this.dialogRef.close({message:""})},t.prototype.confirm=function(){this.dialogRef.close({message:this.messageBody})},t.decorators=[{type:s.Component,args:[{selector:"polp-md-message-form",template:'<h2 mat-dialog-title>\n    {{title}}\n    <button class="float-right"\n            mat-icon-button\n            tabIndex="-1"\n            (click)="close()">\n        <mat-icon>close</mat-icon>\n    </button>\n</h2>\n\n<mat-dialog-content>\n\n        <div class="flex-box flex-column margin-bottom-15">\n            <div class="full-width margin-top-10">\n                <textarea name="messageBody"\n                          class="full-width"\n                          #emailBody\n                          autosize [minRows]="5" [maxRows]="10"\n                          placeholder="Type your personal message here"\n                          [(ngModel)]="messageBody">\n                </textarea>\n            </div>\n\n        </div>\n\n</mat-dialog-content>\n\n<mat-dialog-actions>\n    <button mat-button (click)="close()">No Thanks</button>\n    <button mat-flat-button\n            color="primary"\n            [disabled]="isSubmitDisabled"\n            (click)="confirm()">\n        Ok\n    </button>\n</mat-dialog-actions>\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:c.MatDialogRef},{type:undefined,decorators:[{type:s.Inject,args:[c.MAT_DIALOG_DATA]}]}]},t}(),R=function(){function t(t){this.data=t}return t.decorators=[{type:s.Component,args:[{selector:"polp-snackbar-error",template:'\n        <i class="material-icons">error</i>\n        <span>{{data}}</span>',styles:[":host { display: inline-flex; align-items: center; } "]}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:s.Inject,args:[c.MAT_SNACK_BAR_DATA]}]}]},t}(),O=function(){function t(t){this.data=t}return t.decorators=[{type:s.Component,args:[{selector:"polp-snackbar-info",template:'\n        <i class="material-icons">notifications</i>\n        <span>{{data}}</span>',styles:[":host { display: inline-flex; align-items: center; } "]}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:s.Inject,args:[c.MAT_SNACK_BAR_DATA]}]}]},t}(),P=function(){function t(t){this.data=t}return t.decorators=[{type:s.Component,args:[{selector:"polp-snackbar-success",template:'\n        <i class="material-icons">check_circle</i>\n        <span>{{data}}</span>',styles:[":host { display: inline-flex; align-items: center; } "]}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:s.Inject,args:[c.MAT_SNACK_BAR_DATA]}]}]},t}(),D=function(){function t(t){this.data=t}return t.decorators=[{type:s.Component,args:[{selector:"polp-snackbar-warn",template:'\n        <i class="material-icons">warning</i>\n        <span>{{data}}</span>',styles:[":host { display: inline-flex; align-items: center; } "]}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:s.Inject,args:[c.MAT_SNACK_BAR_DATA]}]}]},t}(),B=function(){function t(t){if(t)throw new Error("PolpMdComponentsModule is already loaded. Import it in the AppModule only")}return t.forRoot=function(){return{ngModule:t}},t.decorators=[{type:s.NgModule,args:[{declarations:[h,T,A,M,I,R,O,P,D,w],imports:[l.CommonModule,u.FormsModule,u.ReactiveFormsModule,c.MatProgressSpinnerModule,c.MatDialogModule,c.MatButtonModule,c.MatIconModule,c.MatRadioModule,c.MatProgressBarModule,c.MatListModule,d.TagInputModule,p.AutosizeModule],exports:[h,T,A,M,I],entryComponents:[h,T,M,I,R,O,P,D,w],providers:[y]}]}],t.ctorParameters=function(){return[{type:t,decorators:[{type:s.Optional},{type:s.SkipSelf}]}]},t}();t.TableDataSourceAdaptor=g,t.PolpMdIndicatorModal=h,t.PolpMdSpinnerServiceImpl=y,t.parseEmails=_,t.parseOnlyEmails=x,t.EmailFormAbstractComponent=C,t.EmailFormComponent=T,t.RadioGroupFieldControl=A,t.UploadFileComponent=M,t.ConfirmDialogComponent=I,t.MessageFormComponent=w,t.SnackbarErrorComponent=R,t.SnackbarInfoComponent=O,t.SnackbarSuccessComponent=P,t.SnackbarWarnComponent=D,t.PolpMdComponentsModule=B,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=polpware-md-components.umd.min.js.map